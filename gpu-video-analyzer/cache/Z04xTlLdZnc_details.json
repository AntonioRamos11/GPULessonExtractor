{"id": "Z04xTlLdZnc", "title": "George Hotz | Reverse engineering | switching from AQL to PM4 to avoid bugs on the AMD 7900XTX Part2", "description": "Date of the stream 6 Apr 2024.\nfrom $1250 buy https://comma.ai/shop/comma-3x & best ADAS system in the world https://openpilot.comma.ai\nLive-stream chat added as Subtitles/CC - English (Twitch Chat) - at the bottom - Show Transcript\n\nSource:\n- https://github.com/geohot/7900xtx\n- https://github.com/fail0verflow/radeon-tools\n- https://github.com/NationalSecurityAgency/ghidra\n- https://www.cs.sfu.ca/~ashriram/Courses/CS295/assets/notebooks/RISCV/RISCV_CARD.pdf\nFollow for notifications:\n- https://twitch.tv/georgehotz\nSupport George:\n- https://twitch.tv/subs/georgehotz\nPre-order tinybox:\n- https://buy.stripe.com/5kAaGL6lk9uX9nW144 (https://tinygrad.org/#tinybox)\n\nChapters:\n00:00:00 intro\n00:01:50 meditation\n00:04:10 questions, AQL packets, radeon southern islands\n00:06:00 two code paths\n00:10:10 amd vulkan, dispatch_indirect\n00:18:30 packet queue = AQL packets, amdgpu eop\n00:22:10 AQL_CONTROL\n00:30:55 blog part 3\n00:37:00 resnet training job to crash\n00:40:00 DEBUG=2\n00:43:00 getting rid of AQL\n00:45:30 engineer wrote something specific and project manager changed the words\n00:47:10 selected pipe, queue does not matter\n00:48:10 different queues\n00:50:15 PM4, PGM_RSRC2 \n00:56:10 EVENT_WRITE.partial_flush comment\n00:58:40 more testing of KFD, moving away from AQL\n01:01:20 gpu_driver.cc\n01:05:30 does someone want's to write PM4?\n01:09:45 when I make the GPU\n01:10:20 nvidia and amd very similar\n01:10:50 firmware absolutely simple as possible, how easy is updating different tier of software\n01:11:20 why AQL exists?\n01:19:45 we got the crash\n01:29:00 double banned, umr, smc bits read_smc\n01:33:00 30% chance PM4 does not have bugs\n01:33:40 rosetta stone style translation F32 and RS64\n01:38:10 radeon_tools marcan\n01:38:20 is AMD going to open source anything useful\n01:40:40 ghost locomotion, argo ai\n01:42:40 argo the next thing, can everyone stop, cleaning solution\n01:44:30 can we all just be more honest\n01:45:35 AMD NDA, infringing patents, \n01:52:15 being afraid of getting sued\n01:55:30 DISPATCH_DIRECT packet\n02:00:40 amd gpus codenames, fiji\n02:02:55 linux-firmware license, not a lawyer\n02:06:10 nvidia gsp license, cuda license no datacenter use\n02:07:55 risk averseness of people\n02:10:40 linux-firmware\n02:20:40 rosetta stone, F32, RS64\n02:37:00 launching specific kernel\n02:40:40 first GPU to support AQL\n02:46:50 NSA, Ghidra, IDA Pro, Russian tools\n02:48:30 respect NSA github\n02:48:50 NSA better at open source then AMD\n02:49:14 NSA more open source than AMD\n02:49:30 backdoors\n02:54:20 drake rosetta stone song\n02:57:30 credit marcan for writing the disassembler\n03:15:45 binvis\n03:19:30 fail0verflow radeon talk\n03:39:25 F32\n03:48:30 gfx1101\n03:53:20 amd rs64\n04:10:15 gfx rs64\n04:17:55 python os lseek\n04:23:15 amdgpu_regs, mmio\n04:34:35 decompiling now\n04:38:50 all the different addresses\n04:42:30 dump_ip.c, upset writing C\n04:48:25 c example mmap fd\n04:51:18 read without advancing file pointer\n05:03:20 bugs in the dispatch\n05:20:25 frequency analysis on code\n05:31:45 next 4 bytes are register\n05:47:00 amd_emu_mode\n05:57:35 we broke the gpu, what did we learn today?\n06:00:05 I have given you the tools you need to solve the problem\n06:05:40 switch to nvidia if you have AMD crashes\n06:09:05 risc-v opcode groups\n06:12:30 capstone risc-v disassembler\n06:18:20 skip instructions, CS_ARCH_RISCV mode\n06:22:20 bad at ghidra\n06:23:30 don't spoil the risc-v\n06:33:00 if labeled easier to read, launch instructions, almost just compile\n06:33:55 figuring out the first instruction\n06:38:30 load this register map\n06:52:00 ghidra load map file\n07:35:20 jump table that goes there, some CP function\n07:54:25 cmd 3 packets pm4\n08:05:00 it's cool that is risc-v\n08:23:40 now we can know if AMD open sources anything real\n08:29:50 I bet this did not support AQL\n08:33:50 we need to stup\n08:42:45 I have found why there is so many bugs in this\n08:49:15 back in the days of bonaire\n08:56:50 HSA was a marketing campaign\n08:57:30 internet issues\n\nOfficial George Hotz communication channels:\n- https://geohot.com\n- https://twitter.com/realGeorgeHotz\n- https://instagram.com/georgehotz\n- https://tinygrad.org\n- https://geohot.github.io/blog\n- https://github.com/geohot\n\nWe archive George Hotz and comma.ai videos for fun.\nFollow for notifications:  \n- https://twitter.com/geohotarchive\n\nThank you for reading and using the SHOW MORE button.\nWe hope you enjoy watching George's videos as much as we do.\nSee you at the next video.", "publish_date": "20240409", "url": "https://www.youtube.com/watch?v=Z04xTlLdZnc", "thumbnail": "https://i.ytimg.com/vi_webp/Z04xTlLdZnc/maxresdefault.webp", "duration": 32455, "view_count": 137422}